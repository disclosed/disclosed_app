box: wercker/rvm
services:
    - wercker/postgresql
build:
    steps:
        - rvm-use:
            version: 2.1.0
        # Execute the bundle install step, a step provided by wercker
        - bundle-install
        # A step that prepares the database.yml using the database in services
        - rails-database-yml
        - script:
            name: Set up db
            code: bin/rake db:schema:load RAILS_ENV=test
        - script:
            name: Run tests
            code: CODECLIMATE_REPO_TOKEN=a34a36d4afaa209c976d95c87538cc803d9f67d0276e1c24d011bc181960d9b9 bin/rake test:all

